// Generated by CoffeeScript 1.11.1
(function() {
  $(function() {
    $('form').submit(function() {
      return $.ajax({
        async: true,
        type: 'POST',
        url: '/api/v1/login',
        data: Common.emailPassword(),
        dataType: 'json',
        context: this,
        success: function(data, status, xhr) {
          alert(status);
          return Common.saveAccessInfo(data);
        },
        error: function(xhr, status, error) {
          return alert(xhr.responseJSON.exception);
        },
        complete: function(xhr, status) {
          return alert(status);
        }
      });
    });
    return $('#user_info_button').click(function() {
      return $.ajax({
        async: true,
        type: 'GET',
        url: '/api/v1/users',
        data: Common.emailPassword(),
        dataType: 'json',
        context: this,
        success: function(data, status, xhr) {
          alert(status);
          return $.cookie('access_token', data.access_token, {
            expires: new Date('Tue, 1-Jan-2030 00:00:00 GMT')
          });
        },
        error: function(xhr, status, error) {
          return alert(xhr.responseJSON.exception);
        },
        complete: function(xhr, status) {
          return alert(status);
        }
      });
    });
  });

}).call(this);
